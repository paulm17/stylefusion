{"version":3,"file":"logger.js","names":["_debug","_interopRequireDefault","require","obj","__esModule","default","BASE_NAMESPACE","logger","exports","genericDebug","loggers","Map","gerOrCreate","namespace","console","log","lastIndexOf","has","set","substring","extend","get","formatters","r","ref","_ref$text","text","color","parseInt","colorCode","f","fn","JSON","stringify","enableDebug","enable"],"sources":["../src/logger.ts"],"sourcesContent":["import genericDebug from 'debug';\nimport type { Debugger } from 'debug';\n\nconst BASE_NAMESPACE = 'wyw-in-js';\n\nexport const logger = genericDebug(BASE_NAMESPACE);\n\nconst loggers = new Map<string, Debugger>();\n\nfunction gerOrCreate(namespace: string | null | undefined): Debugger {\n  console.log(\"logger.ts - gerOrCreate\");\n  if (!namespace) return logger;\n  const lastIndexOf = namespace.lastIndexOf(':');\n  if (!loggers.has(namespace)) {\n    loggers.set(\n      namespace,\n      gerOrCreate(namespace.substring(0, lastIndexOf)).extend(\n        namespace.substring(lastIndexOf + 1)\n      )\n    );\n  }\n\n  return loggers.get(namespace)!;\n}\n\ngenericDebug.formatters.r = (\n  ref: string | { namespace: string; text?: string }\n) => {\n  console.log(\"logger.ts - genericDebug.formatters.r\");\n  const namespace = typeof ref === 'string' ? ref : ref.namespace;\n  const text = typeof ref === 'string' ? namespace : ref.text ?? namespace;\n  const color = parseInt(gerOrCreate(namespace).color, 10);\n  const colorCode = `\\u001B[3${color < 8 ? color : `8;5;${color}`}`;\n  return `${colorCode};1m${text}\\u001B[0m`;\n};\n\ngenericDebug.formatters.f = function f(fn: () => unknown) {\n  console.log(\"logger.ts - genericDebug.formatters.f\");\n  return JSON.stringify(fn());\n};\n\nexport function enableDebug(namespace = `${BASE_NAMESPACE}:*`) {\n  console.log(\"logger.ts - enableDebug\");\n  genericDebug.enable(namespace);\n}\n"],"mappings":";;;;;;;AAAA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AAAiC,SAAAD,uBAAAE,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAGjC,MAAMG,cAAc,GAAG,WAAW;AAE3B,MAAMC,MAAM,GAAAC,OAAA,CAAAD,MAAA,GAAG,IAAAE,cAAY,EAACH,cAAc,CAAC;AAElD,MAAMI,OAAO,GAAG,IAAIC,GAAG,CAAmB,CAAC;AAE3C,SAASC,WAAWA,CAACC,SAAoC,EAAY;EACnEC,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC;EACtC,IAAI,CAACF,SAAS,EAAE,OAAON,MAAM;EAC7B,MAAMS,WAAW,GAAGH,SAAS,CAACG,WAAW,CAAC,GAAG,CAAC;EAC9C,IAAI,CAACN,OAAO,CAACO,GAAG,CAACJ,SAAS,CAAC,EAAE;IAC3BH,OAAO,CAACQ,GAAG,CACTL,SAAS,EACTD,WAAW,CAACC,SAAS,CAACM,SAAS,CAAC,CAAC,EAAEH,WAAW,CAAC,CAAC,CAACI,MAAM,CACrDP,SAAS,CAACM,SAAS,CAACH,WAAW,GAAG,CAAC,CACrC,CACF,CAAC;EACH;EAEA,OAAON,OAAO,CAACW,GAAG,CAACR,SAAS,CAAC;AAC/B;AAEAJ,cAAY,CAACa,UAAU,CAACC,CAAC,GACvBC,GAAkD,IAC/C;EAAA,IAAAC,SAAA;EACHX,OAAO,CAACC,GAAG,CAAC,uCAAuC,CAAC;EACpD,MAAMF,SAAS,GAAG,OAAOW,GAAG,KAAK,QAAQ,GAAGA,GAAG,GAAGA,GAAG,CAACX,SAAS;EAC/D,MAAMa,IAAI,GAAG,OAAOF,GAAG,KAAK,QAAQ,GAAGX,SAAS,IAAAY,SAAA,GAAGD,GAAG,CAACE,IAAI,cAAAD,SAAA,cAAAA,SAAA,GAAIZ,SAAS;EACxE,MAAMc,KAAK,GAAGC,QAAQ,CAAChB,WAAW,CAACC,SAAS,CAAC,CAACc,KAAK,EAAE,EAAE,CAAC;EACxD,MAAME,SAAS,GAAI,WAAUF,KAAK,GAAG,CAAC,GAAGA,KAAK,GAAI,OAAMA,KAAM,EAAE,EAAC;EACjE,OAAQ,GAAEE,SAAU,MAAKH,IAAK,WAAU;AAC1C,CAAC;AAEDjB,cAAY,CAACa,UAAU,CAACQ,CAAC,GAAG,SAASA,CAACA,CAACC,EAAiB,EAAE;EACxDjB,OAAO,CAACC,GAAG,CAAC,uCAAuC,CAAC;EACpD,OAAOiB,IAAI,CAACC,SAAS,CAACF,EAAE,CAAC,CAAC,CAAC;AAC7B,CAAC;AAEM,SAASG,WAAWA,CAACrB,SAAS,GAAI,GAAEP,cAAe,IAAG,EAAE;EAC7DQ,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC;EACtCN,cAAY,CAAC0B,MAAM,CAACtB,SAAS,CAAC;AAChC","ignoreList":[]}